(this["webpackJsonpcreate-react-app-tailwind"]=this["webpackJsonpcreate-react-app-tailwind"]||[]).push([[0],{20:function(e,t,n){},21:function(e,t,n){"use strict";n.r(t);var i=n(2),r=n(13),o=n.n(r),c=n(8),s=n(5),a=n(11),u=n(7),l=n(3),h=n(4),f=n(1),d=n(6),p=Object(d.a)("makeStartingHand"),b=Object(d.a)("getFirstTurnPlaceMoves"),v=Object(d.a)("getSecondTurnPlaceMoves"),j=Object(d.a)("getAfterSecondTurnPlaceMoves"),O=Object(d.a)("getAllAdjacentPositions"),P=Object(d.a)("filterOutPosAdjToOpponentPieces"),g=Object(d.a)("getPlaceMovesFromPositionsForEachPieceInHand"),y=Object(d.a)("getQueenMoves"),A=Object(d.a)("getGrasshopperMoves"),S=Object(d.a)("getMoveOppositeOfDir"),k=Object(d.a)("getAntMoves"),E=Object(d.a)("canSlideBetween"),w=Object(d.a)("isBoardConnectedAfterMove"),H=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Object(l.a)(this,e),Object.defineProperty(this,w,{value:W}),Object.defineProperty(this,E,{value:R}),Object.defineProperty(this,k,{value:L}),Object.defineProperty(this,S,{value:B}),Object.defineProperty(this,A,{value:Q}),Object.defineProperty(this,y,{value:q}),Object.defineProperty(this,g,{value:N}),Object.defineProperty(this,P,{value:M}),Object.defineProperty(this,O,{value:C}),Object.defineProperty(this,j,{value:x}),Object.defineProperty(this,v,{value:I}),Object.defineProperty(this,b,{value:T}),Object.defineProperty(this,p,{value:m}),null!==t?(this.blackHand=t.blackHand,this.whiteHand=t.whiteHand,this.board=t.board,this.turn=t.turn,this.size=t.size,this.whiteQueenPos=t.whiteQueenPos,this.blackQueenPos=t.blackQueenPos):(this.blackHand=Object(f.a)(this,p)[p](U.BLACK),this.whiteHand=Object(f.a)(this,p)[p](U.WHITE),this.board=new Map,this.turn=0,this.size=0,this.whiteQueenPos=null,this.blackQueenPos=null)}return Object(h.a)(e,[{key:"currColor",get:function(){return this.turn%2===0?U.BLACK:U.WHITE}},{key:"opponentColor",get:function(){return this.turn%2===0?U.WHITE:U.BLACK}},{key:"oppositeColor",value:function(e){return e===U.WHITE?U.BLACK:e===U.BLACK?U.WHITE:void 0}},{key:"isGoalState",value:function(e){return this.blackQueenPos&&e===U.WHITE?this.isPosSurrounded(this.blackQueenPos):!(!this.whiteQueenPos||e!==U.BLACK)&&this.isPosSurrounded(this.whiteQueenPos)}},{key:"evaluateState",value:function(e){return this.isGoalState(e)?1e3:this.isGoalState(this.oppositeColor(e))?-1e3:e===U.BLACK?this.countPiecesAround(this.whiteQueenPos)-this.countPiecesAround(this.blackQueenPos):e===U.WHITE?this.countPiecesAround(this.blackQueenPos)-this.countPiecesAround(this.whiteQueenPos):void 0}},{key:"countPiecesAround",value:function(e){var t=this;if(null===e)return-1;var n=0;return e.adjacent.forEach((function(e){t.findPieceAt(e)&&(n+=1)})),n}},{key:"isPosSurrounded",value:function(e){var t=this;return e.adjacent.every((function(e){return t.findPieceAt(e)}))}},{key:"doMove",value:function(e){e.prev?this.board.delete(e.prev.toString()):(this.getHand(e.piece.color).delete(e.piece),this.size++),this.board.set(e.pos.toString(),e.piece),e.piece.type===V.QUEEN&&this.updateQueenPosByMove(e),this.turn++}},{key:"undoMove",value:function(e){this.board.delete(e.pos.toString()),e.prev?this.board.set(e.prev.toString(),e.piece):(this.getHand(e.piece.color).add(e.piece),this.size--),e.piece.type===V.QUEEN&&(e.piece.color===U.BLACK?this.blackQueenPos=e.prev:e.piece.color===U.WHITE&&(this.whiteQueenPos=e.prev)),this.turn--}},{key:"updateQueenPosByMove",value:function(e){e.piece.color===U.BLACK?this.blackQueenPos=e.pos:e.piece.color===U.WHITE&&(this.whiteQueenPos=e.pos)}},{key:"findPieceAt",value:function(e){return this.board.get(e.toString())}},{key:"getPieces",value:function(e){var t=this,n=[];return this.getAllPiecePositions().forEach((function(i){var r=t.findPieceAt(i);r.color===e&&n.push(r)})),n}},{key:"isEmpty",value:function(){return!0}},{key:"getHand",value:function(e){return e===U.WHITE?this.whiteHand:this.blackHand}},{key:"getQueenInHand",value:function(){var e,t=Object(u.a)(this.getHand(this.currColor));try{for(t.s();!(e=t.n()).done;){var n=e.value;if(n.type===V.QUEEN)return n}}catch(i){t.e(i)}finally{t.f()}}},{key:"getFirstOfEachPieceInHand",value:function(){var e=[],t=new Set;return this.getHand(this.currColor).forEach((function(n){t.has(n.type)||(t.add(n.type),e.push(n))})),e}},{key:"getPlaceMoves",value:function(){if(0===this.turn)return Object(f.a)(this,b)[b]();if(1===this.turn)return Object(f.a)(this,v)[v]();var e=Object(f.a)(this,j)[j]();if(this.turn>=6&&void 0!==this.getQueenInHand())return e.filter((function(e){return e.piece.type===V.QUEEN}));return e}},{key:"getPieceMoves",value:function(e){var t=this.findPieceAt(e);if(t.color!==this.currColor)return[];if(this.turn>=6&&void 0!==this.getQueenInHand())return[];var n,i=Object(u.a)(e.adjacent);try{for(i.s();!(n=i.n()).done;){var r=n.value;if(void 0===this.findPieceAt(r)&&!Object(f.a)(this,w)[w](new K(t,r,e)))return[]}}catch(o){i.e(o)}finally{i.f()}return t.type===V.QUEEN?Object(f.a)(this,y)[y](e):t.type===V.ANT?Object(f.a)(this,k)[k](e):t.type===V.GRASSHOPPER?Object(f.a)(this,A)[A](e):void 0}},{key:"getAllPossibleMoves",value:function(){var e=this,t=this.getPlaceMoves(),n=this.getAllPiecePositions().filter((function(t){return e.findPieceAt(t).color===e.currColor})).flatMap((function(t){return e.getPieceMoves(t)}));return[].concat(Object(a.a)(t),Object(a.a)(n))}},{key:"isPosFreeAndAdjToAnyPieceExcluding",value:function(e,t){if(this.findPieceAt(e))return!1;var n,i=Object(u.a)(e.adjacent);try{for(i.s();!(n=i.n()).done;){var r=n.value;if(this.findPieceAt(r)&&!r.equals(t))return!0}}catch(o){i.e(o)}finally{i.f()}return!1}},{key:"getAllPiecePositions",value:function(){return Array.from(this.board.keys()).map(F.fromString)}},{key:"findPlaceMoveAt",value:function(e){return this.getPlaceMoves().find((function(t){return t.pos.equals(e)}))}},{key:"findAntPlaceMoveAt",value:function(e){return this.getPlaceMoves().filter((function(e){return e.piece.type===V.ANT})).find((function(t){return t.pos.equals(e)}))}}]),e}();function m(e){return new Set([new G(V.QUEEN,e),new G(V.GRASSHOPPER,e),new G(V.GRASSHOPPER,e),new G(V.GRASSHOPPER,e),new G(V.ANT,e),new G(V.ANT,e),new G(V.ANT,e),new G(V.ANT,e),new G(V.ANT,e),new G(V.ANT,e),new G(V.ANT,e)])}function T(){return Object(a.a)(this.getFirstOfEachPieceInHand()).map((function(e){return new K(e,z)}))}function I(){return Object(f.a)(this,g)[g](z.adjacent)}function x(){var e=Object(f.a)(this,O)[O](),t=Object(f.a)(this,P)[P](e);return Object(f.a)(this,g)[g](t)}function C(){var e,t=[],n=Object(u.a)(this.getAllPiecePositions());try{for(n.s();!(e=n.n()).done;){var i,r=e.value,o=Object(u.a)(r.adjacent);try{for(o.s();!(i=o.n()).done;){var c=i.value;void 0===this.findPieceAt(c)&&t.push(c)}}catch(s){o.e(s)}finally{o.f()}}}catch(s){n.e(s)}finally{n.f()}return t}function M(e){var t=this;return e.filter((function(e){var n,i=Object(u.a)(e.adjacent);try{for(i.s();!(n=i.n()).done;){var r=n.value,o=t.findPieceAt(r);if(void 0!==o&&o.color!==t.currColor)return!1}}catch(c){i.e(c)}finally{i.f()}return!0}))}function N(e){var t=[];return this.getFirstOfEachPieceInHand().forEach((function(n){var i,r=Object(u.a)(e);try{for(r.s();!(i=r.n()).done;){var o=i.value;t.push(new K(n,o))}}catch(c){r.e(c)}finally{r.f()}})),t}function q(e){var t=this;return e.adjacent.filter((function(n){return t.isPosFreeAndAdjToAnyPieceExcluding(n,e)&&Object(f.a)(t,E)[E](e,n)})).map((function(n){return new K(t.findPieceAt(e),n,e)}))}function Q(e){var t=[];return this.findPieceAt(e.top)&&t.push(Object(f.a)(this,S)[S](e,(function(e){return e.top}))),this.findPieceAt(e.topRight)&&t.push(Object(f.a)(this,S)[S](e,(function(e){return e.topRight}))),this.findPieceAt(e.botRight)&&t.push(Object(f.a)(this,S)[S](e,(function(e){return e.botRight}))),this.findPieceAt(e.bot)&&t.push(Object(f.a)(this,S)[S](e,(function(e){return e.bot}))),this.findPieceAt(e.botLeft)&&t.push(Object(f.a)(this,S)[S](e,(function(e){return e.botLeft}))),this.findPieceAt(e.topLeft)&&t.push(Object(f.a)(this,S)[S](e,(function(e){return e.topLeft}))),t}function B(e,t){for(var n=t(e);this.findPieceAt(n);)n=t(n);return new K(this.findPieceAt(e),n,e)}function L(e){var t=[],n=[e],i=new Set;for(i.add(e.toString());n.length>0;){var r=n.pop(),o=new K(this.findPieceAt(e),r,e);r.equals(e)||t.push(o);var c,s=Object(u.a)(r.adjacent);try{for(s.s();!(c=s.n()).done;){var a=c.value;this.isPosFreeAndAdjToAnyPieceExcluding(a,e)&&!i.has(a.toString())&&Object(f.a)(this,E)[E](r,a)&&(n.push(a),i.add(a.toString()))}}catch(l){s.e(l)}finally{s.f()}}return t}function R(e,t){var n=this,i=e.adjacent.filter((function(e){return n.findPieceAt(e)})),r=t.adjacent.filter((function(e){return n.findPieceAt(e)}));return!(i.filter((function(e){return r.some((function(t){return e.equals(t)}))})).length>=2)}function W(e){this.board.delete(e.prev.toString());var t=this.getAllPiecePositions(),n=[t[0]],i=new Set;i.add(t[0].toString());for(var r=0;n.length>0;){var o=n.pop();r+=1;var c,s=Object(u.a)(o.adjacent);try{for(s.s();!(c=s.n()).done;){var a=c.value;this.findPieceAt(a)&&!i.has(a.toString())&&(n.push(a),i.add(a.toString()))}}catch(l){s.e(l)}finally{s.f()}}return this.board.set(e.prev.toString(),e.piece),r===this.size-1}var G=Object(h.a)((function e(t,n){Object(l.a)(this,e),this.type=t,this.color=n})),K=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Object(l.a)(this,e),this.piece=t,this.pos=n,this.prev=i}return Object(h.a)(e,[{key:"equals",value:function(e){return Object.is(this.piece,e.piece)&&this.pos.equals(e.pos)}}]),e}(),F=function(){function e(t,n){Object(l.a)(this,e),this.q=t,this.r=n}return Object(h.a)(e,[{key:"toString",value:function(){return"".concat(this.q,",").concat(this.r)}},{key:"equals",value:function(e){return this.q===e.q&&this.r===e.r}},{key:"adjacent",get:function(){return[this.topLeft,this.topRight,this.top,this.bot,this.botLeft,this.botRight]}},{key:"top",get:function(){return new e(this.q,this.r-1)}},{key:"bot",get:function(){return new e(this.q,this.r+1)}},{key:"topLeft",get:function(){return new e(this.q-1,this.r)}},{key:"botRight",get:function(){return new e(this.q+1,this.r)}},{key:"topRight",get:function(){return new e(this.q+1,this.r-1)}},{key:"botLeft",get:function(){return new e(this.q-1,this.r+1)}}],[{key:"fromString",value:function(t){var n=t.split(",").map(Number),i=Object(c.a)(n,2);return new e(i[0],i[1])}}]),e}(),z=new F(0,0,0),U={BLACK:"black",WHITE:"white"},V={QUEEN:"queen",SPIDER:"spider",BEETLE:"beetle",GRASSHOPPER:"grasshopper",ANT:"ant"},Y=function(){function e(t){Object(l.a)(this,e),this.hw=t}return Object(h.a)(e,[{key:"playMove",value:function(){var e=this.minimaxAlphaBeta(3,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,U.WHITE),t=e.move;console.log(e.value),this.hw.doMove(t)}},{key:"minimaxAlphaBeta",value:function(e,t,n,i){var r=this.hw;if(0===e||r.isGoalState(U.BLACK)||r.isGoalState(U.WHITE))return{move:null,value:r.evaluateState(U.WHITE)};var o=null;if(i===U.WHITE){var c,s=Number.NEGATIVE_INFINITY,a=r.getAllPossibleMoves(),l=Object(u.a)(a);try{for(l.s();!(c=l.n()).done;){var h=c.value;r.doMove(h);var f=this.minimaxAlphaBeta(e-1,t,n,U.BLACK);if(r.undoMove(h),f.value>s&&(s=f.value,o=h),n<=(t=Math.max(t,f.value)))break}}catch(P){l.e(P)}finally{l.f()}return{move:o,value:s}}if(i===U.BLACK){var d,p=Number.POSITIVE_INFINITY,b=r.getAllPossibleMoves(),v=Object(u.a)(b);try{for(v.s();!(d=v.n()).done;){var j=d.value;r.doMove(j);var O=this.minimaxAlphaBeta(e-1,t,n,U.WHITE);if(r.undoMove(j),O.value<p&&(p=O.value,o=j),(n=Math.min(n,O.value))<=t)break}}catch(P){v.e(P)}finally{v.f()}return{move:o,value:p}}}}]),e}(),_=n(0);function D(){var e=Object(i.useState)(new H),t=Object(c.a)(e,2),n=t[0],r=t[1],o=Object(i.useState)([]),a=Object(c.a)(o,2),u=a[0],l=a[1],h=Object(i.useState)([]),f=Object(c.a)(h,2),d=f[0],p=f[1],b=Object(i.useState)([]),v=Object(c.a)(b,2),j=v[0],O=v[1],P=Object(i.useState)([]),g=Object(c.a)(P,2),y=g[0],A=g[1],S=Object(i.useState)([]),k=Object(c.a)(S,2),E=k[0],w=k[1],m=Object(i.useState)([]),T=Object(c.a)(m,2),I=T[0],x=T[1],C=Object(i.useState)(),M=Object(c.a)(C,2),N=M[0],q=M[1],Q=Object(i.useState)(),B=Object(c.a)(Q,2),L=B[0],R=B[1],W=Object(i.useState)(null),G=Object(c.a)(W,2),K=G[0],z=G[1],D=function(e){n.doMove(e),new Y(n).playMove(),r(new H(n)),l([]),p([]);var t=[],i=[],o=[],c=[];n.board.forEach((function(e,n){n=F.fromString(n),e.type===V.ANT&&e.color===U.BLACK?t.push({pos:n,piece:e}):e.type===V.ANT&&e.color===U.WHITE?i.push({pos:n,piece:e}):e.type===V.QUEEN&&e.color===U.WHITE?R({pos:n,piece:e}):e.type===V.QUEEN&&e.color===U.BLACK?q({pos:n,piece:e}):e.type===V.GRASSHOPPER&&e.color===U.WHITE?o.push({pos:n,piece:e}):e.type===V.GRASSHOPPER&&e.color===U.BLACK&&c.push({pos:n,piece:e})})),n.isGoalState(U.BLACK)&&z(U.BLACK),n.isGoalState(U.WHITE)&&z(U.WHITE),O(t),A(i),x(o),w(c)},J=function(e){p([]),l(n.getPlaceMoves().filter((function(t){return t.piece.type===e})))},$=function(e){l([]),p(n.getPieceMoves(e))};return Object(_.jsxs)("div",{children:[Object(_.jsx)(s.a,{width:1200,height:800,children:Object(_.jsxs)(s.c,{size:{x:5,y:5},children:[u.map((function(e){return Object(_.jsx)(s.b,{style:{fill:"green"},q:e.pos.q,r:e.pos.r,s:0,onClick:function(){return D(e)}},"g".concat(e.pos.toString()))})),d.map((function(e){return Object(_.jsx)(s.b,{style:{fill:"blue"},q:e.pos.q,r:e.pos.r,s:0,onClick:function(){return D(e)}},"b".concat(e.pos.toString()))})),j.map((function(e){return Object(_.jsx)(s.b,{style:{fill:"black"},q:e.pos.q,r:e.pos.r,s:0,onClick:function(){return $(e.pos)},children:Object(_.jsx)(s.d,{style:{fill:"white",fontSize:5},children:" Ant "})},"blk".concat(e.pos.toString()))})),y.map((function(e){return Object(_.jsx)(s.b,{style:{fill:"grey"},q:e.pos.q,r:e.pos.r,s:0,onClick:function(){return $(e.pos)},children:Object(_.jsx)(s.d,{style:{fill:"white",fontSize:5},children:" Ant "})},"w".concat(e.pos.toString()))})),I.map((function(e){return Object(_.jsx)(s.b,{style:{fill:"grey"},q:e.pos.q,r:e.pos.r,s:0,onClick:function(){return $(e.pos)},children:Object(_.jsx)(s.d,{style:{fill:"green",fontSize:5},children:" GH "})},"bgh".concat(e.pos.toString()))})),E.map((function(e){return Object(_.jsx)(s.b,{style:{fill:"black"},q:e.pos.q,r:e.pos.r,s:0,onClick:function(){return $(e.pos)},children:Object(_.jsx)(s.d,{style:{fill:"green",fontSize:5},children:" GH "})},"wgh".concat(e.pos.toString()))})),L?Object(_.jsx)(s.b,{style:{fill:"grey"},q:L.pos.q,r:L.pos.r,s:0,onClick:function(){return $(L.pos)},children:Object(_.jsx)(s.d,{style:{fill:"gold",fontSize:3},children:" Queen "})},"wq".concat(L.pos.toString())):Object(_.jsx)(_.Fragment,{}),N?Object(_.jsx)(s.b,{style:{fill:"black"},q:N.pos.q,r:N.pos.r,s:0,onClick:function(){return $(N.pos)},children:Object(_.jsx)(s.d,{style:{fill:"gold",fontSize:3},children:" Queen "})},"bq".concat(N.pos.toString())):Object(_.jsx)(_.Fragment,{})]})}),Object(_.jsx)("button",{onClick:function(){return J(V.ANT)},style:{background:"lightgray",width:"100px",height:"100px",margin:"10px"},children:"Place Ant"}),Object(_.jsx)("button",{onClick:function(){return J(V.QUEEN)},style:{background:"wheat",width:"100px",height:"100px",margin:"10px"},children:"Place Queen"}),Object(_.jsx)("button",{onClick:function(){return J(V.GRASSHOPPER)},style:{background:"lightgreen",width:"100px",height:"100px",margin:"10px"},children:"Place Hopper"}),K?Object(_.jsx)("h1",{children:"GAME OVER"}):Object(_.jsx)(_.Fragment,{}),Object(_.jsx)("h1",{children:n.evaluateState()})]})}var J=function(){return Object(_.jsx)("div",{className:"w-screen h-screen",children:Object(_.jsx)(D,{})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(20);o.a.render(Object(_.jsx)(J,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[21,1,2]]]);
//# sourceMappingURL=main.7a8bfced.chunk.js.map